const translations = {
    ru: {
        // –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        hero_title: "–ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π –ø–æ –ì—Ä—É–∑–∏–∏ —Å –∫–æ–º—Ñ–æ—Ä—Ç–æ–º",
        hero_subtitle: "–ë—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –º–µ—Å—Ç–∞ –æ–Ω–ª–∞–π–Ω. –ë–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π –Ω–∞ –≤–æ–∫–∑–∞–ª–µ.",
        label_from: "–û—Ç–∫—É–¥–∞",
        label_to: "–ö—É–¥–∞",
        btn_search: "–ù–∞–π—Ç–∏ —Ä–µ–π—Å",
        schedule_title: "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–π—Å–æ–≤",
        
        // –û –Ω–∞—Å
        about_title: "–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç GeoBus?",
        about_text: "–ó–∞–±—É–¥—å—Ç–µ –æ —Ö–∞–æ—Å–µ –Ω–∞ –∞–≤—Ç–æ–≤–æ–∫–∑–∞–ª–∞—Ö –∏ —Å–ø–æ—Ä–∞—Ö —Å —Ç–∞–∫—Å–∏—Å—Ç–∞–º–∏. GeoBus ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å –≤ –ì—Ä—É–∑–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞—à–µ –º–µ—Å—Ç–æ –≤ –∫–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ. –ú—ã –æ—Ç–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞–¥–µ–∂–Ω—ã—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º 4.8+ –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—ã. –í–∞—à–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–µ —Å –ø–æ—Å–∞–¥–∫–∏, –∞ —Å –∫–ª–∏–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ.",
        about_list_1: "–ì–∞—Ä–∞–Ω—Ç–∏—è –ø–æ—Å–∞–¥–æ—á–Ω–æ–≥–æ –º–µ—Å—Ç–∞",
        about_list_2: "–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö –¥–æ–ø–ª–∞—Ç",
        about_list_3: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ 24/7",

        city_tbilisi: "–¢–±–∏–ª–∏—Å–∏",
        city_kutaisi: "–ö—É—Ç–∞–∏—Å–∏",
        city_batumi: "–ë–∞—Ç—É–º–∏",
        city_kazbegi: "–ö–∞–∑–±–µ–≥–∏",
        status_departed: "–£—à–µ–ª",
        status_closed: "–ü—Ä–æ–¥–∞–∂–∞ –∑–∞–∫—Ä—ã—Ç–∞",
        btn_select: "–í—ã–±—Ä–∞—Ç—å",
        seats_free: "–º–µ—Å—Ç —Å–≤–æ–±–æ–¥–Ω–æ",
        modal_title: "–î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è",
        modal_seats: "–°–∫–æ–ª—å–∫–æ –º–µ—Å—Ç?",
        option_window: "–•–æ—á—É —É –æ–∫–Ω–∞",
        modal_route_label: "–ú–∞—Ä—à—Ä—É—Ç",
        btn_confirm: "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω—å",
        ph_name: "–í–∞—à–µ –ò–º—è",
        ph_phone: "–¢–µ–ª–µ—Ñ–æ–Ω",
        today: "–°–µ–≥–æ–¥–Ω—è",
        tomorrow: "–ó–∞–≤—Ç—Ä–∞",
        alert_success: "–ë—Ä–æ–Ω—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!",
        
        // –î–∞–Ω–Ω—ã–µ (–ú–∞—Ä—à—Ä—É—Ç—ã, –ú–∞—à–∏–Ω—ã, –í–æ–¥–∏—Ç–µ–ª–∏)
        route_tbi_bat: "–¢–±–∏–ª–∏—Å–∏ - –ë–∞—Ç—É–º–∏",
        route_tbi_kut: "–¢–±–∏–ª–∏—Å–∏ - –ö—É—Ç–∞–∏—Å–∏",
        route_tbi_kaz: "–¢–±–∏–ª–∏—Å–∏ - –ö–∞–∑–±–µ–≥–∏",
        car_sprinter: "Mercedes Sprinter (–ë–µ–ª—ã–π)",
        car_vito: "Vito VIP (–ß–µ—Ä–Ω—ã–π)",
        car_transit: "Ford Transit (–ö–æ–º—Ñ–æ—Ä—Ç)",
        
        // üëá –ò–ú–ï–ù–ê –í–û–î–ò–¢–ï–õ–ï–ô (RU)
        driver_giga: "–ì–∏–≥–∞",
        driver_mamuka: "–ú–∞–º—É–∫–∞",
        driver_dato: "–î–∞—Ç–æ"
    },
    en: {
        // UI
        hero_title: "Travel Georgia with Comfort",
        hero_subtitle: "Book seats online. No queues at the bus station.",
        label_from: "From",
        label_to: "To",
        btn_search: "Find Tickets",
        schedule_title: "Bus Schedule",
        
        // About
        about_title: "Why choose GeoBus?",
        about_text: "Forget the chaos at bus stations and haggling with taxi drivers. GeoBus is the first service in Georgia that guarantees your seat in comfortable transport. We select only reliable drivers with a 4.8+ rating and fixed prices. Your journey begins not with boarding, but with a click.",
        about_list_1: "Guaranteed seat reservation",
        about_list_2: "Fixed price with no hidden fees",
        about_list_3: "24/7 Dispatcher Support",

        city_tbilisi: "Tbilisi",
        city_kutaisi: "Kutaisi",
        city_batumi: "Batumi",
        city_kazbegi: "Kazbegi",
        status_departed: "Departed",
        status_closed: "Booking Closed",
        btn_select: "Book Now",
        seats_free: "seats left",
        modal_title: "Booking Details",
        modal_seats: "How many seats?",
        option_window: "Window seat",
        modal_route_label: "Route",
        btn_confirm: "Confirm Booking",
        ph_name: "Your Name",
        ph_phone: "Phone Number",
        today: "Today",
        tomorrow: "Tomorrow",
        alert_success: "Booking sent!",

        // Data
        route_tbi_bat: "Tbilisi - Batumi",
        route_tbi_kut: "Tbilisi - Kutaisi",
        route_tbi_kaz: "Tbilisi - Kazbegi",
        car_sprinter: "Mercedes Sprinter (White)",
        car_vito: "Vito VIP (Black)",
        car_transit: "Ford Transit (Comfort)",

        // üëá DRIVER NAMES (EN)
        driver_giga: "Giga",
        driver_mamuka: "Mamuka",
        driver_dato: "Dato"
    },
    ka: {
        // UI
        hero_title: "·Éò·Éõ·Éí·Éñ·Éê·Éï·É†·Éî·Éó ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù·É®·Éò ·Éô·Éù·Éõ·É§·Éù·É†·É¢·É£·Éö·Éê·Éì",
        hero_subtitle: "·Éì·Éê·ÉØ·Éê·Éï·É®·Éú·Éî·Éó ·Éê·Éì·Éí·Éò·Éö·Éî·Éë·Éò ·Éù·Éú·Éö·Éê·Éò·Éú. ·É†·Éò·Éí·Éî·Éë·Éò·É° ·Éí·Éê·É†·Éî·É®·Éî.",
        label_from: "·É°·Éê·Éò·Éì·Éê·Éú",
        label_to: "·É°·Éê·Éì",
        btn_search: "·Éë·Éò·Éö·Éî·Éó·Éò·É° ·Éõ·Éù·É´·Éî·Éë·Éú·Éê",
        schedule_title: "·Éí·Éê·Éú·É†·Éò·Éí·Éò",
        
        // About
        about_title: "·É†·Éê·É¢·Éù·Éõ GeoBus?",
        about_text: "·Éì·Éê·Éò·Éï·Éò·É¨·Éß·Éî·Éó ·É•·Éê·Éù·É°·Éò ·É°·Éê·Éì·Éí·É£·É†·Éî·Éë·Éñ·Éî ·Éì·Éê ·É¢·Éê·É•·É°·Éò·É° ·Éõ·É´·É¶·Éù·Éö·Éî·Éë·Éó·Éê·Éú ·Éô·Éê·Éõ·Éê·Éó·Éò. GeoBus ·Éê·É†·Éò·É° ·Éû·Éò·É†·Éï·Éî·Éö·Éò ·É°·Éî·É†·Éï·Éò·É°·Éò ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù·É®·Éò, ·É†·Éù·Éõ·Éî·Éö·Éò·É™ ·Éí·Éê·É†·Éê·Éú·É¢·Éò·Éê·É° ·Éí·Éê·É´·Éö·Éî·Éï·Éó ·Éô·Éù·Éõ·É§·Éù·É†·É¢·É£·Éö ·Éõ·Éí·Éñ·Éê·Éï·É†·Éù·Éë·Éê·Éñ·Éî. ·É©·Éï·Éî·Éú ·Éï·Éò·É†·É©·Éî·Éï·Éó ·Éõ·ÉÆ·Éù·Éö·Éù·Éì ·É°·Éê·Éú·Éì·Éù ·Éõ·É´·É¶·Éù·Éö·Éî·Éë·É° 4.8+ ·É†·Éî·Éò·É¢·Éò·Éú·Éí·Éò·Éó. ·Éó·É•·Éï·Éî·Éú·Éò ·Éõ·Éù·Éí·Éñ·Éê·É£·É†·Éù·Éë·Éê ·Éò·É¨·Éß·Éî·Éë·Éê ·Éê·É†·Éê ·É©·Éê·É°·ÉÆ·Éì·Éù·Éõ·Éò·Éó, ·Éê·É†·Éê·Éõ·Éî·Éì ·É°·Éê·Éò·É¢·Éñ·Éî ·Éî·É†·Éó·Éò ·Éì·Éê·É¨·Éô·Éê·Éû·É£·Éú·Éî·Éë·Éò·Éó.",
        about_list_1: "·Éê·Éì·Éí·Éò·Éö·Éò·É° ·Éí·Éê·É†·Éê·Éú·É¢·Éò·É†·Éî·Éë·É£·Éö·Éò ·ÉØ·Éê·Éï·É®·Éê·Éú·Éò",
        about_list_2: "·É§·Éò·É•·É°·Éò·É†·Éî·Éë·É£·Éö·Éò ·É§·Éê·É°·Éò ·É§·Éê·É†·É£·Éö·Éò ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éî·Éë·Éò·É° ·Éí·Éê·É†·Éî·É®·Éî",
        about_list_3: "24/7 ·Éì·Éò·É°·Éû·Éî·É¢·É©·Éî·É†·Éò·É° ·Éõ·ÉÆ·Éê·É†·Éì·Éê·É≠·Éî·É†·Éê",

        city_tbilisi: "·Éó·Éë·Éò·Éö·Éò·É°·Éò",
        city_kutaisi: "·É•·É£·Éó·Éê·Éò·É°·Éò",
        city_batumi: "·Éë·Éê·Éó·É£·Éõ·Éò",
        city_kazbegi: "·Éß·Éê·Éñ·Éë·Éî·Éí·Éò",
        status_departed: "·Éí·Éê·Éï·Éò·Éì·Éê",
        status_closed: "·ÉØ·Éê·Éï·É®·Éê·Éú·Éò ·Éì·Éê·ÉÆ·É£·É†·É£·Éö·Éò·Éê",
        btn_select: "·Éê·É†·É©·Éî·Éï·Éê",
        seats_free: "·Éê·Éì·Éí·Éò·Éö·Éò·Éê",
        modal_title: "·ÉØ·Éê·Éï·É®·Éú·Éò·É° ·Éì·Éî·É¢·Éê·Éö·Éî·Éë·Éò",
        modal_seats: "·É†·Éê·Éù·Éì·Éî·Éú·Éù·Éë·Éê",
        option_window: "·É§·Éê·Éú·ÉØ·Éê·É†·Éê·É°·Éó·Éê·Éú",
        modal_route_label: "·Éõ·Éê·É†·É®·É†·É£·É¢·Éò",
        btn_confirm: "·Éì·Éê·Éì·Éê·É°·É¢·É£·É†·Éî·Éë·Éê",
        ph_name: "·Éó·É•·Éï·Éî·Éú·Éò ·É°·Éê·ÉÆ·Éî·Éö·Éò",
        ph_phone: "·É¢·Éî·Éö·Éî·É§·Éù·Éú·Éò",
        today: "·Éì·É¶·Éî·É°",
        tomorrow: "·ÉÆ·Éï·Éê·Éö",
        alert_success: "·ÉØ·Éê·Éï·É®·Éê·Éú·Éò ·Éí·Éê·Éí·Éñ·Éê·Éï·Éú·Éò·Éö·Éò·Éê!",

        // Data
        route_tbi_bat: "·Éó·Éë·Éò·Éö·Éò·É°·Éò - ·Éë·Éê·Éó·É£·Éõ·Éò",
        route_tbi_kut: "·Éó·Éë·Éò·Éö·Éò·É°·Éò - ·É•·É£·Éó·Éê·Éò·É°·Éò",
        route_tbi_kaz: "·Éó·Éë·Éò·Éö·Éò·É°·Éò - ·Éß·Éê·Éñ·Éë·Éî·Éí·Éò",
        car_sprinter: "Mercedes Sprinter (·Éó·Éî·Éó·É†·Éò)",
        car_vito: "Vito VIP (·É®·Éê·Éï·Éò)",
        car_transit: "Ford Transit (·Éô·Éù·Éõ·É§·Éù·É†·É¢·Éò)",

        // üëá ·Éõ·É´·É¶·Éù·Éö·Éî·Éë·Éò·É° ·É°·Éê·ÉÆ·Éî·Éö·Éî·Éë·Éò (KA)
        driver_giga: "·Éí·Éò·Éí·Éê",
        driver_mamuka: "·Éõ·Éê·Éõ·É£·Éô·Éê",
        driver_dato: "·Éì·Éê·Éó·Éù"
    }
};

let currentLang = 'ru';

// --- –î–ê–ù–ù–´–ï –†–ï–ô–°–û–í (–ó–∞–º–µ–Ω–∏–ª–∏ –ø–æ–ª–µ 'driver' –Ω–∞ 'driverKey') ---
const baseRides = [
    { 
        id: 1, 
        time: "09:00", 
        routeKey: "route_tbi_bat", 
        driverKey: "driver_giga", // üîë –ö–õ–Æ–ß
        driverImg: "https://randomuser.me/api/portraits/men/32.jpg",
        carKey: "car_sprinter",
        carImg: "img/sprinter.jpg", 
        price: 30, seats: 15, booked: 12 
    },
    { 
        id: 2, 
        time: "11:30", 
        routeKey: "route_tbi_kut", 
        driverKey: "driver_dato", // üîë –ö–õ–Æ–ß
        driverImg: "https://randomuser.me/api/portraits/men/62.jpg",
        carKey: "car_transit", 
        carImg: "img/transit.jpg", 
        price: 25, seats: 18, booked: 5 
    },
    { 
        id: 3, 
        time: "14:00", 
        routeKey: "route_tbi_bat", 
        driverKey: "driver_mamuka", // üîë –ö–õ–Æ–ß
        driverImg: "https://randomuser.me/api/portraits/men/45.jpg",
        carKey: "car_vito", 
        carImg: "img/vito.jpg", 
        price: 45, seats: 7, booked: 2 
    },
    { 
        id: 4, 
        time: "16:00", 
        routeKey: "route_tbi_kaz", 
        driverKey: "driver_giga", // üîë –ö–õ–Æ–ß
        driverImg: "https://randomuser.me/api/portraits/men/32.jpg",
        carKey: "car_sprinter", 
        carImg: "img/sprinter.jpg", 
        price: 25, seats: 15, booked: 8 
    },
    { 
        id: 5, 
        time: "19:00", 
        routeKey: "route_tbi_bat", 
        driverKey: "driver_mamuka", // üîë –ö–õ–Æ–ß
        driverImg: "https://randomuser.me/api/portraits/men/45.jpg",
        carKey: "car_vito", 
        carImg: "img/vito.jpg", 
        price: 50, seats: 7, booked: 0 
    }
];

// --- –§–£–ù–ö–¶–ò–ò ---

function changeLanguage(lang) {
    currentLang = lang;
    
    // –°–±—Ä–æ—Å –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('bg-white', 'text-blue-600', 'shadow-sm', 'ring-1', 'ring-black/5');
        btn.classList.add('text-gray-500');
    });

    // –ê–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞
    const activeBtn = document.getElementById(`btn-${lang}`);
    if (activeBtn) {
        activeBtn.classList.remove('text-gray-500');
        activeBtn.classList.add('bg-white', 'text-blue-600', 'shadow-sm', 'ring-1', 'ring-black/5');
    }

    // –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    document.querySelectorAll('[data-lang]').forEach(el => {
        const key = el.getAttribute('data-lang');
        if (translations[lang] && translations[lang][key]) {
            el.innerText = translations[lang][key];
        }
    });

    // –ü–µ—Ä–µ–≤–æ–¥ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
    document.getElementById('p-name').placeholder = translations[lang].ph_name;
    document.getElementById('p-phone').placeholder = translations[lang].ph_phone;

    // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ —Ç–∞–±–æ–≤
    initDateTabs(); 
    renderRides();
}

function updateClock() {
    const clockElement = document.getElementById('live-clock');
    const now = new Date();
    clockElement.innerText = now.toLocaleTimeString('ru-RU');
}
setInterval(updateClock, 1000);

// --- –¢–ê–ë–´ ---
let selectedDateIndex = 0;

function initDateTabs() {
    const tabsContainer = document.getElementById('date-tabs');
    tabsContainer.innerHTML = '';
    const now = new Date();
    const months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];

    for (let i = 0; i < 4; i++) {
        const date = new Date();
        date.setDate(now.getDate() + i);
        
        let dayName = `${date.getDate()}.${months[date.getMonth()]}`;
        if (i === 0) dayName = translations[currentLang].today;
        if (i === 1) dayName = translations[currentLang].tomorrow;
        
        const isActive = i === selectedDateIndex;
        const btnClass = isActive 
            ? "bg-blue-600 text-white shadow-md border-blue-600" 
            : "bg-white text-gray-600 border-gray-200 hover:bg-gray-50";

        tabsContainer.innerHTML += `
            <button onclick="selectDate(${i})" class="flex-shrink-0 px-6 py-3 rounded-xl border transition duration-200 flex flex-col items-center min-w-[100px] ${btnClass}">
                <span class="text-xs font-medium opacity-80 uppercase">${dayName}</span>
                <span class="font-bold text-lg">${date.getDate()}.${months[date.getMonth()]}</span>
            </button>
        `;
    }
}

function selectDate(index) {
    selectedDateIndex = index;
    initDateTabs();
    renderRides();
}

// --- –û–¢–†–ò–°–û–í–ö–ê –†–ï–ô–°–û–í ---
function renderRides() {
    const container = document.getElementById('rides-container');
    container.innerHTML = ''; 

    const now = new Date();
    const currentTotalMinutes = now.getHours() * 60 + now.getMinutes();

    baseRides.forEach(ride => {
        // üëá –ë–ï–†–ï–ú –ü–ï–†–ï–í–û–î–´ –í–°–ï–• –î–ê–ù–ù–´–•
        const routeName = translations[currentLang][ride.routeKey];
        const carName = translations[currentLang][ride.carKey];
        const driverName = translations[currentLang][ride.driverKey]; // –ò–º—è –≤–æ–¥–∏—Ç–µ–ª—è

        const [rideH, rideM] = ride.time.split(':').map(Number);
        const rideTotalMinutes = rideH * 60 + rideM;
        let status = 'active'; 
        
        if (selectedDateIndex === 0) {
            if (currentTotalMinutes >= rideTotalMinutes) status = 'departed';
            else if (rideTotalMinutes - currentTotalMinutes <= 60) status = 'closed';
        }

        let btnText = translations[currentLang].btn_select;
        let btnClass = "bg-blue-50 text-blue-700 hover:bg-blue-100";
        let btnAction = `onclick="openModal(${ride.id})"`;
        let seatsDisplay = `${ride.seats - ride.booked} ${translations[currentLang].seats_free}`;
        let seatsColor = "text-green-600";

        if (status === 'closed') {
            btnText = translations[currentLang].status_closed;
            btnClass = "bg-gray-100 text-gray-500 cursor-not-allowed";
            btnAction = "";
        } 
        else if (status === 'departed') {
            btnText = translations[currentLang].status_departed;
            btnClass = "bg-gray-200 text-gray-400 cursor-not-allowed";
            btnAction = "";
            seatsDisplay = "‚Äî"; 
            seatsColor = "text-gray-400";
        }

        container.innerHTML += `
        <div class="bg-white rounded-2xl border border-gray-200 p-6 flex flex-col md:flex-row items-center gap-6 hover:shadow-lg transition duration-300">
            <div class="flex-grow text-center md:text-left w-full">
                <div class="flex items-center justify-center md:justify-start gap-3 mb-1">
                    <span class="text-2xl font-bold text-gray-900">${ride.time}</span>
                </div>
                <h3 class="font-bold text-lg text-gray-800">${routeName}</h3>
                <div class="flex items-center justify-center md:justify-start gap-3 mt-2">
                    <img src="${ride.driverImg}" class="w-8 h-8 rounded-full border border-gray-200" alt="driver">
                    <div class="text-left">
                        <p class="text-xs font-bold text-gray-800">${driverName}</p> <p class="text-xs text-gray-500">${carName}</p>
                    </div>
                </div>
            </div>

            <div class="flex flex-row md:flex-col items-center gap-4 w-full md:w-auto justify-between md:justify-end">
                <div class="text-right">
                    <span class="block text-2xl font-bold text-gray-900">${ride.price} ‚Çæ</span>
                    <span class="block text-xs font-medium ${seatsColor}">
                        ${seatsDisplay}
                    </span>
                </div>
                <button ${btnAction} class="px-8 py-3 rounded-xl font-bold transition w-full md:w-auto ${btnClass}">
                    ${btnText}
                </button>
            </div>
        </div>
        `;
    });
}

// --- –ú–û–î–ê–õ–ö–ê ---
let selectedSeats = 1;

function openModal(id) {
    const ride = baseRides.find(r => r.id === id);
    if (!ride) return;
    
    // –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –º–æ–¥–∞–ª–∫–∏
    const routeName = translations[currentLang][ride.routeKey];
    const carName = translations[currentLang][ride.carKey];
    const driverName = translations[currentLang][ride.driverKey];

    document.getElementById('modal-route').innerText = routeName;
    document.getElementById('modal-time').innerText = ride.time;
    document.getElementById('modal-driver-name').innerText = driverName; // –ò–º—è –≤–æ–¥–∏—Ç–µ–ª—è
    document.getElementById('modal-car-name').innerText = carName;
    document.getElementById('modal-car-img').src = ride.carImg;
    document.getElementById('modal-driver-img').src = ride.driverImg;

    selectedSeats = 1;
    document.getElementById('seat-count').innerText = 1;
    document.getElementById('window-seat').checked = false;
    document.getElementById('modal').classList.remove('hidden');
}

function closeModal() {
    document.getElementById('modal').classList.add('hidden');
}

function changeSeats(delta) {
    let newVal = selectedSeats + delta;
    if (newVal >= 1 && newVal <= 5) {
        selectedSeats = newVal;
        document.getElementById('seat-count').innerText = newVal;
    }
}

function confirmBooking() {
    alert(translations[currentLang].alert_success);
    closeModal();
}

function scrollToResults() {
    document.getElementById('schedule').scrollIntoView({ behavior: 'smooth' });
}

// –ó–ê–ü–£–°–ö
document.addEventListener('DOMContentLoaded', () => {
    updateClock();
    changeLanguage('ru');
});